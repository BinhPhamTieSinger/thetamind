<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra Challenges - ThetaMind</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/challenges.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="/" class="logo">Î¸-Mind</a>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/tools">Tools</a></li>
                <li><a href="/documentation">Documentation</a></li>
                <li><a href="/about">About</a></li>
                {% if user %}
                    <li><a href="/dashboard">Dashboard</a></li>
                    <li><a href="/logout">Logout</a></li>
                {% else %}
                    <li><a href="/login">Login</a></li>
                    <li><a href="/register">Register</a></li>
                {% endif %}
            </ul>
            <button id="theme-toggle" class="theme-toggle-btn">
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </nav>

    <main class="page-content">
        <section id="algebra-challenges">
            <div class="container">
                <div class="challenges-header">
                    <h2>Algebra Challenge Arena</h2>
                    <p class="section-subtitle">Solve challenges to unlock new nodes and earn rewards!</p>
                    
                    <div class="gamification-header">
                        <div class="stats-display">
                            <div class="stat-item" id="user-coins">
                                <i class="fas fa-coins"></i><span>Loading...</span>
                            </div>
                            <div class="stat-item" id="user-badges">
                                <!-- Badges will be loaded here by JS -->
                            </div>
                        </div>
                        <div class="challenge-info">
                            <div class="info-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span id="current-level">Level 1</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-star"></i>
                                <span id="completed-challenges">0/12</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Challenge Map Container -->
                <div class="challenge-map-container">
                    <div class="map-grid" id="challenge-map">
                        <!-- Nodes will be dynamically generated by JavaScript -->
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Overall Progress</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Challenge Modal -->
        <div id="challenge-modal" class="modal" style="display: none;">
            <div class="modal-content challenge-modal-content">
                <span class="close-btn">&times;</span>
                <div id="modal-title-area">
                    <h2 id="challenge-title">Challenge</h2>
                    <div class="challenge-reward">
                        <i class="fas fa-coins"></i>
                        <span id="reward-amount">+50 coins</span>
                    </div>
                </div>
                
                <div class="challenge-content">
                    <div class="challenge-difficulty">
                        <span class="difficulty-badge" id="difficulty-badge">Medium</span>
                    </div>
                    
                    <div id="challenge-loader" class="loader" style="display: none;"></div>
                    
                    <div id="challenge-problem-area" style="display: none;">
                        <div class="problem-statement">
                            <h4>Problem:</h4>
                            <p id="problem-text"></p>
                        </div>
                        
                        <div class="solution-area">
                            <label for="user-solution">Your Solution:</label>
                            <textarea id="user-solution" placeholder="Show your work and final answer..."></textarea>
                            
                            <div class="hint-section">
                                <button id="buy-hint-btn" class="btn btn-outline">
                                    <i class="fas fa-lightbulb"></i>
                                    Buy Hint (50 coins)
                                </button>
                                <div id="hint-area" class="hint-area" style="display: none;"></div>
                            </div>
                            
                            <button id="submit-challenge-btn" class="btn btn-primary">
                                Submit Solution
                            </button>
                        </div>
                    </div>
                    
                    <div id="challenge-feedback" class="feedback-area" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="success-modal" class="modal" style="display: none;">
            <div class="modal-content success-modal-content">
                <div class="success-animation">
                    <i class="fas fa-trophy"></i>
                </div>
                <h3>Challenge Completed!</h3>
                <p id="success-message">You've successfully solved the challenge!</p>
                <div class="reward-display">
                    <div class="reward-item">
                        <i class="fas fa-coins"></i>
                        <span id="coins-earned">+50 coins</span>
                    </div>
                    <div class="reward-item" id="badge-earned" style="display: none;">
                        <i class="fas fa-medal"></i>
                        <span>New Badge Unlocked!</span>
                    </div>
                </div>
                <button id="continue-btn" class="btn btn-primary">Continue</button>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 ThetaMind. All rights reserved.</p>
        </div>
    </footer>

    <script src="/static/js/gamification.js"></script>
    <script src="/static/js/challenges.js"></script>
    <script src="/static/js/script.js"></script>
</body>
</html>